<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fides | Client</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
    <link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="../../dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <!-- AdminLTE Skins. Choose a skin from the css/skins 
         folder instead of downloading all of them to reduce the load. -->
    <link href="../../dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="skin-blue">
    <div class="wrapper">
      
       <aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
          <!-- sidebar menu: : style can be found in sidebar.less -->
          <ul class="sidebar-menu">
            <li class="header">MEN&Ugrave; FIDES</li>
            <li class="treeview">
              <a href="../../index.html">
                <i class="fa fa-dashboard"></i> <span>Dashboard</span> <i class="fa fa-angle-left pull-right"></i>
              </a>
            </li>
            <li class="active treeview">
              <a href="#">
                <i class="fa fa-pie-chart"></i>
                <span>Clienti</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../../pages/client/getClients.html"><i class="fa fa-circle-o"></i> Lista Clienti</a></li>
                <li class="active"><a href="../../pages/client/addClient.html"><i class="fa fa-circle-o"></i> Inserisci Cliente</a></li>
                <li><a href="pages/charts/flot.html"><i class="fa fa-circle-o"></i> Modifica Cliente</a></li>
              </ul>
            </li>
            <li class="treeview">
              <a href="#">
                <i class="fa fa-pie-chart"></i>
                <span>Prodotti</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../../pages/product/getProducts.html"><i class="fa fa-circle-o"></i> Lista Prodotti</a></li>
                <li><a href="../../pages/product/addProduct.html"><i class="fa fa-circle-o"></i> Inserisci Prodotto</a></li>
                <li><a href="pages/charts/flot.html"><i class="fa fa-circle-o"></i> Modifica Prodotto</a></li>
              </ul>
            </li>
			<li class="treeview">
              <a href="#">
                <i class="fa fa-pie-chart"></i>
                <span>Fatture</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="pages/charts/inline.html"><i class="fa fa-circle-o"></i> Lista Fatture</a></li>
                <li><a href="pages/charts/morris.html"><i class="fa fa-circle-o"></i> Inserisci Fattura</a></li>
              </ul>
            </li>
          </ul>
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
            Clienti
            <small>Inserimento del cliente</small>
          </h1>
        </section>

        <!-- Main content -->
        <section class="content">
          <div class="row">
            <!-- left column -->
			<div class="col-md-2">
			</div>
            <div class="col-md-8">
				<div id="messages">
				</div>
              <!-- general form elements -->
              <div class="box box-primary col-md-12">
                <!-- form start -->
                <form role="form">
                  <div class="box-body">
                    <div class="form-group">
                      <label for="clientName">Nome: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-male"></i>
						  </div>
							<input type="text" class="form-control" id="clientName" placeholder="Inserisci nome cliente">
						</div>
                    </div>
                    <div class="form-group">
                      <label for="clientSurname">Cognome: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-male"></i>
						  </div>
						<input type="text" class="form-control" id="clientSurname" placeholder="Inserisci cognome cliente">
						</div>
                    </div>
                    <div class="form-group" >
                      <label for="clientCF">Codice Fiscale: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-credit-card"></i>
						  </div>
						<input type="text" class="form-control" id="clientCF" placeholder="Inserisci codice fiscale cliente">
					  </div>
                    </div>
                    <div class="form-group">
                      <label for="clientPIva">P. iva: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-briefcase"></i>
						  </div>
						<input type="text" class="form-control" id="clientPIva" placeholder="Inserisci p. iva cliente" maxlength="16">
					  </div>
                    </div>
                    <div class="form-group">
                      <label for="clientAddress">Indirizzo: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-book"></i>
						  </div>
                      <input type="text" class="form-control" id="clientAddress" placeholder="Inserisci indirizzo cliente">
					  </div>
                    </div>
                    <div class="form-group">
                      <label for="clientPhone">Telefono: </label>
					  <div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-phone"></i>
						  </div>
						  <input type="text" class="form-control" id="clientPhone" placeholder="Inserisci telefono cliente">
					  </div>
                    </div>
                    <div class="form-group">
                      <label for="clientMobile">Cellulare: </label>
						<div class="input-group">
						  <div class="input-group-addon">
							<i class="fa fa-mobile"></i>
						  </div>
							<input type="text" class="form-control" id="clientMobile" placeholder="Inserisci cellulare cliente">
						</div>
                    </div>
                  </div><!-- /.box-body -->
					  <div class="box-footer" align="right">
							<button type="button" id="send" class="btn btn-primary">Inserisci</button>&nbsp;
							<button type="button" id="reset" class="btn btn-danger">Reset</button>
					  </div>
                </form>
              </div><!-- /.box -->
            </div><!--/.col (right) -->
			<div class="col-md-2">
			</div>
          </div>   <!-- /.row -->
        </section><!-- /.content -->
        </section><!-- /.content -->
      </div><!-- /.content-wrapper -->
    </div><!-- ./wrapper -->

    <!-- jQuery 2.1.3 -->
    <script src="../../plugins/jQuery/jQuery-2.1.3.min.js"></script>
    <!-- Bootstrap 3.3.2 JS -->
    <script src="../../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <!-- FastClick -->
    <script src='../../plugins/fastclick/fastclick.min.js'></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/app.min.js" type="text/javascript"></script>
    <!-- Parse -->
    <script src="../../dist/js/parse-1.4.2.min.js" type="text/javascript"></script>
	 <!-- InputMask -->
    <script src="../../plugins/input-mask/jquery.inputmask.js" type="text/javascript"></script>
    <script src="../../plugins/input-mask/jquery.inputmask.date.extensions.js" type="text/javascript"></script>
    <script src="../../plugins/input-mask/jquery.inputmask.extensions.js" type="text/javascript"></script>
    
	<script>
		jQuery(document).ready(function($){
			Parse.initialize("9Sxmi3NVV8hu4ANFXrukJ5Ub18Ehb8ec56ak2nha", "QrpzL5XpyI6kq5oniO1biQfoUX8p9Em1Hl0mnY5K");
			
			function resetFields(){
				$("#clientName").parent().parent().removeClass("has-error");
				$("#clientSurname").parent().parent().removeClass("has-error");
				$("#clientCF").parent().parent().removeClass("has-error");
				$("#clientAddress").parent().parent().removeClass("has-error");
				$("#clientPIva").parent().parent().removeClass("has-error");
				$("#clientPhone").parent().parent().removeClass("has-error");
				$("#clientMobile").parent().parent().removeClass("has-error");
				
				$("#messages").removeClass("callout callout-success");
				$("#messages").empty();
				
				$("#clientName").val("");
				$("#clientSurname").val("");
				$("#clientCF").val("");
				$("#clientAddress").val("");
				$("#clientPIva").val("");
				$("#clientPhone").val("");
				$("#clientMobile").val("");
			}
			
			$("#clientCF").keyup(function(){
				$("#clientCF").parent().parent().removeClass("has-error");
			});
			$("#clientName").keyup(function(){
				$("#clientName").parent().parent().removeClass("has-error");
			});
			$("#clientSurname").keyup(function(){
				$("#clientSurname").parent().parent().removeClass("has-error");
			});
			$("#clientAddress").keyup(function(){
				$("#clientAddress").parent().parent().removeClass("has-error");
			});
			$("#clientPIva").keyup(function(){
				$("#clientPIva").parent().parent().removeClass("has-error");
			});
			$("#clientPhone").keyup(function(){
				$("#clientPhone").parent().parent().removeClass("has-error");
			});
			$("#clientMobile").keyup(function(){
				$("#clientMobile").parent().parent().removeClass("has-error");
			});
			
			$("#reset").click(function(){
			
				/*alert("resetS");
				var Client = Parse.Object.extend("cliente");
				alert("Client");
				
				alert("client");
				var query = new Parse.Query(Client);
				
				query.get("Z9PdVt7N6y",{
					success: function(result) {
						result.destroy({
							success: function(object) {
								alert('Delete Successful');
							},
							error: function(object, error) {
								alert('Delete failed');
							}
						});
					},
					error: function(error) {
						alert('Error in delete query');
					}
				});
				alert("dopo find");*/
				resetFields();
			});
			
			$("#send").click(function(){
				var flag = true;
				if($("#clientCF").val() !== "" ){
					var expr = /^[A-Za-z]{6}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{3}[A -Za-z]{1}$/;
					if(!expr.test($("#clientCF").val())){
						$("#clientCF").parent().parent().attr("class","form-group has-error");
						flag = false;
					}
				}
				if($("#clientName").val() === "" ){
					$("#clientName").parent().parent().attr("class","form-group has-error");
					flag = false;
				}
				if($("#clientSurname").val() === "" ){
					$("#clientSurname").parent().parent().attr("class","form-group has-error");
					flag = false;
				}
				if($("#clientPIva").val() === "" ){
					$("#clientPIva").parent().parent().attr("class","form-group has-error");
					flag = false;
				}
				if($("#clientPhone").val() === "" ){
					$("#clientPhone").parent().parent().attr("class","form-group has-error");
					flag = false;
				}else{
					var expr = /^([0-9]*\-?\ ?\/?[0-9]*)$/;
					if(!expr.test($("#clientPhone").val())){
						$("#clientPhone").parent().parent().attr("class","form-group has-error");
						flag = false;
					}
				}
				if($("#clientMobile").val() === "" ){
					$("#clientMobile").parent().parent().attr("class","form-group has-error");
					flag = false;
				}else{
					var expr = /^([0-9]*\-?\ ?\/?[0-9]*)$/;
					if(!expr.test($("#clientMobile").val())){
						$("#clientMobile").parent().parent().attr("class","form-group has-error");
						flag = false;
					}
				}
				if($("#clientAddress").val() === "" ){
					$("#clientAddress").parent().parent().attr("class","form-group has-error");
					flag = false;
				}
				
				if(flag){
					var Client = Parse.Object.extend("cliente");
					var client = new Client();

					client.save({
					  nome: $("#clientName").val(),
					  cognome:  $("#clientSurname").val(),
					  codice_fiscale:  $("#clientCF").val(),
					  piva:  $("#clientPIva").val(),
					  indirizzo:  $("#clientAddress").val(),
					  telefono:  $("#clientPhone").val(),
					  cellulare:  $("#clientMobile").val()
					}, {
					  success: function(client) {
						$("#messages").attr("class","callout callout-success");
						$("#messages").html("<h4>Successo!</h4><p>I dati sono stati inseriti correttamente sul server.</p>")
					  },
					  error: function(client, error) {
						$("#messages").attr("class","callout callout-danger");
						$("#messages").html("<h4>Errore!</h4><p>Sembra ci sia stato un errore nell\'elaborazione dei dati da parte del server. Potresti riprovare, per favore?</p>")
					  }
					});
					setTimeout(function(){
						resetFields();
					},3000);
					
				}
			});
		
		});
	</script>
  </body>
</html>
